{"version":3,"names":["getInfo","value","JSON","parse","execa","sync","stdout","project","workspace","undefined","error","message","includes","match","err","Error"],"sources":["../../src/tools/getInfo.ts"],"sourcesContent":["import execa from 'execa';\nimport {IosInfo} from '../types';\n\nexport function getInfo(): IosInfo | undefined {\n  try {\n    const value = JSON.parse(\n      execa.sync('xcodebuild', ['-list', '-json']).stdout,\n    );\n\n    if ('project' in value) {\n      return value.project;\n    } else if ('workspace' in value) {\n      return value.workspace;\n    }\n\n    return undefined;\n  } catch (error) {\n    if (\n      (error as Error)?.message &&\n      (error as Error).message.includes('xcodebuild: error:')\n    ) {\n      const match = (error as Error).message.match(/xcodebuild: error: (.*)/);\n      const err = match ? match[0] : error;\n      throw new Error(err as any);\n    }\n    throw new Error(error as any);\n  }\n}\n"],"mappings":";;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAA0B;AAGnB,SAASA,OAAO,GAAwB;EAC7C,IAAI;IACF,MAAMC,KAAK,GAAGC,IAAI,CAACC,KAAK,CACtBC,gBAAK,CAACC,IAAI,CAAC,YAAY,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC,CAACC,MAAM,CACpD;IAED,IAAI,SAAS,IAAIL,KAAK,EAAE;MACtB,OAAOA,KAAK,CAACM,OAAO;IACtB,CAAC,MAAM,IAAI,WAAW,IAAIN,KAAK,EAAE;MAC/B,OAAOA,KAAK,CAACO,SAAS;IACxB;IAEA,OAAOC,SAAS;EAClB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA;IACd,IACE,SAACA,KAAK,yCAAN,KAAkBC,OAAO,KACxBD,KAAK,CAAWC,OAAO,CAACC,QAAQ,CAAC,oBAAoB,CAAC,EACvD;MACA,MAAMC,KAAK,GAAIH,KAAK,CAAWC,OAAO,CAACE,KAAK,CAAC,yBAAyB,CAAC;MACvE,MAAMC,GAAG,GAAGD,KAAK,GAAGA,KAAK,CAAC,CAAC,CAAC,GAAGH,KAAK;MACpC,MAAM,IAAIK,KAAK,CAACD,GAAG,CAAQ;IAC7B;IACA,MAAM,IAAIC,KAAK,CAACL,KAAK,CAAQ;EAC/B;AACF"}