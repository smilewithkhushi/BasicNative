{"version":3,"sources":["../../../../../../src/start/server/metro/debugging/MessageHandler.ts"],"sourcesContent":["import type {\n  Connection,\n  DebuggerMetadata,\n  DebuggerRequest,\n  DebuggerResponse,\n  DeviceMetadata,\n  DeviceRequest,\n  DeviceResponse,\n  Page,\n} from './types';\n\nexport abstract class MessageHandler {\n  protected page: Page;\n  protected device: DeviceMetadata;\n  protected debugger: DebuggerMetadata;\n\n  constructor(connection: Connection) {\n    this.page = connection.page;\n    this.device = connection.device;\n    this.debugger = connection.debugger;\n  }\n\n  /** Determine if this middleware should be enabled or disabled, based on the page capabilities */\n  isEnabled(): boolean {\n    return true;\n  }\n\n  /** Send a message directly to the device */\n  sendToDevice<T = DeviceResponse | DebuggerResponse>(message: T): true {\n    // @ts-expect-error Type `T` is json serializable, just not the same one from `@react-native/dev-middleware`\n    this.device.sendMessage(message);\n    return true;\n  }\n\n  /** Send a message directly to the debugger */\n  sendToDebugger<T = DeviceResponse | DebuggerResponse>(message: T): true {\n    // @ts-expect-error Type `T` is json serializable, just not the same one from `@react-native/dev-middleware`\n    this.debugger.sendMessage(message);\n    return true;\n  }\n\n  /**\n   * Intercept a message coming from the device, modify or respond to it through `this._sendMessageToDevice`.\n   * Return `true` if the message was handled, this will stop the message propagation.\n   */\n  handleDeviceMessage?(message: DeviceRequest | DeviceResponse): boolean;\n\n  /**\n   * Intercept a message coming from the debugger, modify or respond to it through `socket.send`.\n   * Return `true` if the message was handled, this will stop the message propagation.\n   */\n  handleDebuggerMessage?(message: DebuggerRequest | DebuggerResponse): boolean;\n}\n"],"names":["MessageHandler","constructor","connection","page","device","debugger","isEnabled","sendToDevice","message","sendMessage","sendToDebugger"],"mappings":"AAAA;;;;+BAWsBA,gBAAc;;aAAdA,cAAc;;AAA7B,MAAeA,cAAc;IAKlCC,YAAYC,UAAsB,CAAE;QAClC,IAAI,CAACC,IAAI,GAAGD,UAAU,CAACC,IAAI,CAAC;QAC5B,IAAI,CAACC,MAAM,GAAGF,UAAU,CAACE,MAAM,CAAC;QAChC,IAAI,CAACC,QAAQ,GAAGH,UAAU,CAACG,QAAQ,CAAC;IACtC;IAEA,+FAA+F,GAC/FC,SAAS,GAAY;QACnB,OAAO,IAAI,CAAC;IACd;IAEA,0CAA0C,GAC1CC,YAAY,CAAwCC,OAAU,EAAQ;QACpE,4GAA4G;QAC5G,IAAI,CAACJ,MAAM,CAACK,WAAW,CAACD,OAAO,CAAC,CAAC;QACjC,OAAO,IAAI,CAAC;IACd;IAEA,4CAA4C,GAC5CE,cAAc,CAAwCF,OAAU,EAAQ;QACtE,4GAA4G;QAC5G,IAAI,CAACH,QAAQ,CAACI,WAAW,CAACD,OAAO,CAAC,CAAC;QACnC,OAAO,IAAI,CAAC;IACd;CAaD"}