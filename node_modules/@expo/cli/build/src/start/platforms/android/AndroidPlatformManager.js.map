{"version":3,"sources":["../../../../../src/start/platforms/android/AndroidPlatformManager.ts"],"sourcesContent":["import { AndroidAppIdResolver } from './AndroidAppIdResolver';\nimport { AndroidDeviceManager } from './AndroidDeviceManager';\nimport { Device } from './adb';\nimport { startAdbReverseAsync } from './adbReverse';\nimport { AppIdResolver } from '../AppIdResolver';\nimport { BaseOpenInCustomProps, BaseResolveDeviceProps, PlatformManager } from '../PlatformManager';\n\ninterface AndroidOpenInCustomProps extends BaseOpenInCustomProps {\n  launchActivity?: string;\n}\n\nexport class AndroidPlatformManager extends PlatformManager<Device, AndroidOpenInCustomProps> {\n  constructor(\n    protected projectRoot: string,\n    protected port: number,\n    options: {\n      /** Get the base URL for the dev server hosting this platform manager. */\n      getDevServerUrl: () => string | null;\n      /** Expo Go URL */\n      getExpoGoUrl: () => string;\n      /** Get redirect URL for native disambiguation. */\n      getRedirectUrl: () => string | null;\n      /** Dev Client URL. */\n      getCustomRuntimeUrl: (props?: { scheme?: string }) => string | null;\n    }\n  ) {\n    super(projectRoot, {\n      platform: 'android',\n      ...options,\n      resolveDeviceAsync: AndroidDeviceManager.resolveAsync,\n    });\n  }\n\n  async openAsync(\n    options:\n      | { runtime: 'expo' | 'web' }\n      | { runtime: 'custom'; props?: Partial<AndroidOpenInCustomProps> },\n    resolveSettings?: Partial<BaseResolveDeviceProps<Device>>\n  ): Promise<{ url: string }> {\n    await startAdbReverseAsync([this.port]);\n    return super.openAsync(options, resolveSettings);\n  }\n\n  _getAppIdResolver(): AppIdResolver {\n    return new AndroidAppIdResolver(this.projectRoot);\n  }\n\n  _resolveAlternativeLaunchUrl(\n    applicationId: string,\n    props?: Partial<AndroidOpenInCustomProps>\n  ): string {\n    return props?.launchActivity ?? `${applicationId}/.MainActivity`;\n  }\n}\n"],"names":["AndroidPlatformManager","PlatformManager","constructor","projectRoot","port","options","platform","resolveDeviceAsync","AndroidDeviceManager","resolveAsync","openAsync","resolveSettings","startAdbReverseAsync","_getAppIdResolver","AndroidAppIdResolver","_resolveAlternativeLaunchUrl","applicationId","props","launchActivity"],"mappings":"AAAA;;;;+BAWaA,wBAAsB;;aAAtBA,sBAAsB;;sCAXE,wBAAwB;sCACxB,wBAAwB;4BAExB,cAAc;iCAE4B,oBAAoB;AAM5F,MAAMA,sBAAsB,SAASC,gBAAe,gBAAA;IACzDC,YACYC,WAAmB,EACnBC,IAAY,EACtBC,OASC,CACD;QACA,KAAK,CAACF,WAAW,EAAE;YACjBG,QAAQ,EAAE,SAAS;YACnB,GAAGD,OAAO;YACVE,kBAAkB,EAAEC,qBAAoB,qBAAA,CAACC,YAAY;SACtD,CAAC,CAAC;QAjBON,mBAAAA,WAAmB,CAAA;QACnBC,YAAAA,IAAY,CAAA;IAiBxB;UAEMM,SAAS,CACbL,OAEoE,EACpEM,eAAyD,EAC/B;QAC1B,MAAMC,IAAAA,WAAoB,qBAAA,EAAC;YAAC,IAAI,CAACR,IAAI;SAAC,CAAC,CAAC;QACxC,OAAO,KAAK,CAACM,SAAS,CAACL,OAAO,EAAEM,eAAe,CAAC,CAAC;IACnD;IAEAE,iBAAiB,GAAkB;QACjC,OAAO,IAAIC,qBAAoB,qBAAA,CAAC,IAAI,CAACX,WAAW,CAAC,CAAC;IACpD;IAEAY,4BAA4B,CAC1BC,aAAqB,EACrBC,KAAyC,EACjC;YACDA,GAAqB;QAA5B,OAAOA,CAAAA,GAAqB,GAArBA,KAAK,QAAgB,GAArBA,KAAAA,CAAqB,GAArBA,KAAK,CAAEC,cAAc,YAArBD,GAAqB,GAAI,CAAC,EAAED,aAAa,CAAC,cAAc,CAAC,CAAC;IACnE;CACD"}