{"version":3,"names":["upgrade","_","root","projectDir","url","URL","update","version","latest","current","logger","error","chalk","dim","toString","process","exit","from","to","stable","success","white","searchParams","set","log","upgradeCommand","name","description","func"],"sources":["../../../src/commands/upgrade/upgrade.ts"],"sourcesContent":["import chalk from 'chalk';\nimport type {Config} from '@react-native-community/cli-types';\nimport {logger, version} from '@react-native-community/cli-tools';\n\n/**\n * Upgrade application to a new version of React Native.\n */\nasync function upgrade(_: string[], {root: projectDir}: Config) {\n  const url = new URL(\n    'https://react-native-community.github.io/upgrade-helper',\n  );\n\n  const update = await version.latest(projectDir);\n  if (!update?.current) {\n    logger.error(\n      `Cannot figure out your version of React Native, use: ${chalk.dim(\n        url.toString(),\n      )}`,\n    );\n    process.exit(1);\n  }\n\n  const from = update.current;\n  const to = update.upgrade?.stable;\n\n  if (to === from) {\n    logger.success(\n      `You are on the most recent stable release of React Native: ${chalk.white(\n        from,\n      )} ðŸŽ‰.`,\n    );\n    return;\n  }\n\n  url.searchParams.set('from', from);\n  if (to) {\n    url.searchParams.set('to', to);\n  }\n\n  logger.log(`\nTo upgrade React Native please follow the instructions here:\n\n  ${chalk.dim(url.toString())}\n`);\n}\n\nconst upgradeCommand = {\n  name: 'upgrade',\n  description: 'Generate a link to the upgrade helper to help you upgrade',\n  func: upgrade,\n};\n\nexport default upgradeCommand;\n"],"mappings":";;;;;;AAAA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAEA;EAAA;EAAA;IAAA;EAAA;EAAA;AAAA;AAAkE;AAElE;AACA;AACA;AACA,eAAeA,OAAO,CAACC,CAAW,EAAE;EAACC,IAAI,EAAEC;AAAkB,CAAC,EAAE;EAAA;EAC9D,MAAMC,GAAG,GAAG,IAAIC,GAAG,CACjB,yDAAyD,CAC1D;EAED,MAAMC,MAAM,GAAG,MAAMC,mBAAO,CAACC,MAAM,CAACL,UAAU,CAAC;EAC/C,IAAI,EAACG,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEG,OAAO,GAAE;IACpBC,kBAAM,CAACC,KAAK,CACT,wDAAuDC,gBAAK,CAACC,GAAG,CAC/DT,GAAG,CAACU,QAAQ,EAAE,CACd,EAAC,CACJ;IACDC,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;EACjB;EAEA,MAAMC,IAAI,GAAGX,MAAM,CAACG,OAAO;EAC3B,MAAMS,EAAE,sBAAGZ,MAAM,CAACN,OAAO,oDAAd,gBAAgBmB,MAAM;EAEjC,IAAID,EAAE,KAAKD,IAAI,EAAE;IACfP,kBAAM,CAACU,OAAO,CACX,8DAA6DR,gBAAK,CAACS,KAAK,CACvEJ,IAAI,CACJ,MAAK,CACR;IACD;EACF;EAEAb,GAAG,CAACkB,YAAY,CAACC,GAAG,CAAC,MAAM,EAAEN,IAAI,CAAC;EAClC,IAAIC,EAAE,EAAE;IACNd,GAAG,CAACkB,YAAY,CAACC,GAAG,CAAC,IAAI,EAAEL,EAAE,CAAC;EAChC;EAEAR,kBAAM,CAACc,GAAG,CAAE;AACd;AACA;AACA,IAAIZ,gBAAK,CAACC,GAAG,CAACT,GAAG,CAACU,QAAQ,EAAE,CAAE;AAC9B,CAAC,CAAC;AACF;AAEA,MAAMW,cAAc,GAAG;EACrBC,IAAI,EAAE,SAAS;EACfC,WAAW,EAAE,2DAA2D;EACxEC,IAAI,EAAE5B;AACR,CAAC;AAAC,eAEayB,cAAc;AAAA"}