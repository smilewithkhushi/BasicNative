{"version":3,"sources":["../../../../src/utils/telemetry/getContext.ts"],"sourcesContent":["import * as ciInfo from 'ci-info';\nimport os from 'os';\n\nimport { groupBy } from '../array';\n\nexport function getContext() {\n  return {\n    os: { name: os.platform(), version: os.release() },\n    device: { arch: os.arch(), version: os.version(), memory: summarizeMemory() },\n    cpu: summarizeCpuInfo(),\n    app: { name: 'expo/cli', version: process.env.__EXPO_VERSION },\n    ci: ciInfo.isCI ? { name: ciInfo.name, isPr: ciInfo.isPR } : undefined,\n  };\n}\n\nfunction summarizeMemory() {\n  const gb = os.totalmem() / 1024 / 1024 / 1024;\n  return Math.round(gb * 100) / 100;\n}\n\nfunction summarizeCpuInfo() {\n  const cpus = groupBy(os.cpus() ?? [], (item) => item.model);\n  const summary = { model: '', speed: 0, count: 0 };\n\n  for (const key in cpus) {\n    if (cpus[key].length > summary.count) {\n      summary.model = key;\n      summary.speed = cpus[key][0].speed;\n      summary.count = cpus[key].length;\n    }\n  }\n\n  return !summary.model || !summary.count ? undefined : summary;\n}\n"],"names":["getContext","os","name","platform","version","release","device","arch","memory","summarizeMemory","cpu","summarizeCpuInfo","app","process","env","__EXPO_VERSION","ci","ciInfo","isCI","isPr","isPR","undefined","gb","totalmem","Math","round","cpus","groupBy","item","model","summary","speed","count","key","length"],"mappings":"AAAA;;;;+BAKgBA,YAAU;;aAAVA,UAAU;;;+DALF,SAAS;;;;;;;8DAClB,IAAI;;;;;;uBAEK,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAE3B,SAASA,UAAU,GAAG;IAC3B,OAAO;QACLC,EAAE,EAAE;YAAEC,IAAI,EAAED,GAAE,EAAA,QAAA,CAACE,QAAQ,EAAE;YAAEC,OAAO,EAAEH,GAAE,EAAA,QAAA,CAACI,OAAO,EAAE;SAAE;QAClDC,MAAM,EAAE;YAAEC,IAAI,EAAEN,GAAE,EAAA,QAAA,CAACM,IAAI,EAAE;YAAEH,OAAO,EAAEH,GAAE,EAAA,QAAA,CAACG,OAAO,EAAE;YAAEI,MAAM,EAAEC,eAAe,EAAE;SAAE;QAC7EC,GAAG,EAAEC,gBAAgB,EAAE;QACvBC,GAAG,EAAE;YAAEV,IAAI,EAAE,UAAU;YAAEE,OAAO,EAAES,OAAO,CAACC,GAAG,CAACC,cAAc;SAAE;QAC9DC,EAAE,EAAEC,OAAM,EAAA,CAACC,IAAI,GAAG;YAAEhB,IAAI,EAAEe,OAAM,EAAA,CAACf,IAAI;YAAEiB,IAAI,EAAEF,OAAM,EAAA,CAACG,IAAI;SAAE,GAAGC,SAAS;KACvE,CAAC;AACJ,CAAC;AAED,SAASZ,eAAe,GAAG;IACzB,MAAMa,EAAE,GAAGrB,GAAE,EAAA,QAAA,CAACsB,QAAQ,EAAE,GAAG,IAAI,GAAG,IAAI,GAAG,IAAI,AAAC;IAC9C,OAAOC,IAAI,CAACC,KAAK,CAACH,EAAE,GAAG,GAAG,CAAC,GAAG,GAAG,CAAC;AACpC,CAAC;AAED,SAASX,gBAAgB,GAAG;QACLV,GAAS;IAA9B,MAAMyB,IAAI,GAAGC,IAAAA,MAAO,QAAA,EAAC1B,CAAAA,GAAS,GAATA,GAAE,EAAA,QAAA,CAACyB,IAAI,EAAE,YAATzB,GAAS,GAAI,EAAE,EAAE,CAAC2B,IAAI,GAAKA,IAAI,CAACC,KAAK,CAAC,AAAC;IAC5D,MAAMC,OAAO,GAAG;QAAED,KAAK,EAAE,EAAE;QAAEE,KAAK,EAAE,CAAC;QAAEC,KAAK,EAAE,CAAC;KAAE,AAAC;IAElD,IAAK,MAAMC,GAAG,IAAIP,IAAI,CAAE;QACtB,IAAIA,IAAI,CAACO,GAAG,CAAC,CAACC,MAAM,GAAGJ,OAAO,CAACE,KAAK,EAAE;YACpCF,OAAO,CAACD,KAAK,GAAGI,GAAG,CAAC;YACpBH,OAAO,CAACC,KAAK,GAAGL,IAAI,CAACO,GAAG,CAAC,CAAC,CAAC,CAAC,CAACF,KAAK,CAAC;YACnCD,OAAO,CAACE,KAAK,GAAGN,IAAI,CAACO,GAAG,CAAC,CAACC,MAAM,CAAC;QACnC,CAAC;IACH,CAAC;IAED,OAAO,CAACJ,OAAO,CAACD,KAAK,IAAI,CAACC,OAAO,CAACE,KAAK,GAAGX,SAAS,GAAGS,OAAO,CAAC;AAChE,CAAC"}